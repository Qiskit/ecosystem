name: Badges

on: [push, pull_request, workflow_dispatch]

jobs:
  badge:
    runs-on: ubuntu-latest
    env:
      project: "my-super-project"
      status: "validated"
    steps:
    - uses: actions/checkout@v2
    - name: Generate badge
      run: |
        if [[ "${status}" -eq "validated" ]]; then
          curl "https://img.shields.io/static/v1?label=Qiskit&message=${project}&color=purple" > badges/${project}.svg
        else
          curl "https://img.shields.io/static/v1?label=Qiskit&message=${project}&color=grey" > badges/${project}.svg
        fi
    - name: Commit changes and create Pull Request
      id: cpr
      uses: peter-evans/create-pull-request@v3
      with:
        repository: "qiskit-community/ecosystem"
        commit-message: Submission - Add ${project} to list.
        title: Add ${project} to list.
        body: |
          Add ${project} to list.
        branch: submission-toto
        base: main
